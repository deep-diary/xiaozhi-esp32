# 电机零位设置测试指南

## 新增MCP工具

### 设置电机零位
- **工具名称**: `self.motor.set_zero_position`
- **功能**: 设置指定电机的零位
- **参数**: 
  - `motor_id`: 电机ID (1-255)

## 测试步骤

### 1. 单电机零位测试

#### 步骤1: 设置电机为位置模式
```python
# 设置电机1为位置模式
self.motor.set_position_mode(motor_id=1)
```

#### 步骤2: 设置电机零位
```python
# 设置电机1的零位
self.motor.set_zero_position(motor_id=1)
```

#### 步骤3: 验证零位设置
```python
# 启动状态查询任务，观察电机位置
self.motor.start_status_task(motor_id=1)

# 等待几秒钟观察日志输出
# 应该看到电机位置接近0.000 rad

# 停止状态查询任务
self.motor.stop_status_task()
```

### 2. 多电机零位测试

可以依次对多个电机进行零位设置：

```python
# 设置电机1-6的零位
for i in range(1, 7):
    self.motor.set_position_mode(motor_id=i)
    self.motor.set_zero_position(motor_id=i)
```

### 3. 机械臂零位测试

完成单电机测试后，可以进行机械臂零位测试：

```python
# 假设已经创建了机械臂控制器
# arm = DeepArm(deep_motor, [1, 2, 3, 4, 5, 6])

# 设置机械臂零位（同时设置6个电机）
arm.setZeroPosition()
```

## 预期结果

### 成功情况
- 日志显示: `设置电机X零位成功`
- 电机位置反馈接近0.000 rad
- 返回消息: `设置电机X零位成功`

### 失败情况
- 日志显示: `设置电机X零位失败`
- 返回消息: `设置电机X零位失败`
- 可能原因: 电机未连接、CAN通信问题、电机ID错误

## 注意事项

1. **电机连接**: 确保电机已正确连接到CAN总线
2. **电机注册**: 确保电机已注册到DeepMotor管理器
3. **位置模式**: 设置零位前建议先设置为位置模式
4. **物理位置**: 零位设置后，电机的当前位置将被定义为0 rad
5. **测试顺序**: 建议先测试单个电机，确认功能正常后再测试机械臂

## 故障排除

### 常见问题

1. **电机无响应**
   - 检查电机ID是否正确
   - 检查CAN总线连接
   - 确认电机已注册

2. **零位设置失败**
   - 检查电机是否在线
   - 尝试重新设置位置模式
   - 检查电机状态

3. **位置不归零**
   - 零位设置可能需要时间生效
   - 检查电机反馈数据
   - 确认电机处于位置模式

## 下一步

完成零位测试后，可以继续进行：
1. 电机位置控制测试
2. 电机录制功能测试
3. 机械臂整体功能测试
